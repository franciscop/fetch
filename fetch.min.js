(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.fetch=factory()})(this,function(){"use strict";require("isomorphic-fetch");const magic=require("magic-promises");const ongoing={};var fetch$1=(url,options={})=>{if(typeof options.method==="undefined"){options.method="get"}if(typeof options.credentials==="undefined"){options.credentials="include"}if(options.method.toLowerCase()==="get"){if(ongoing[url])return ongoing[url]}ongoing[url]=magic(fetch(url,options).then(res=>{delete ongoing[url];if(res.ok)return res;const error=new Error(res.statusText||res.status);error.response=res;return Promise.reject(error)}));return ongoing[url]};return fetch$1});